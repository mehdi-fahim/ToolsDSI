{% extends 'admin/base.html.twig' %}

{% block title %}D√©tail Locataire - Panel Admin{% endblock %}

{% block content %}
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; flex-wrap: wrap; gap: 15px;">
        <div>
            <h2 style="color: #2d3748; font-size: 1.8rem; margin-bottom: 5px;">
                üè† D√©tail du Locataire
            </h2>
            <p style="color: #718096;">
                ESI: {{ esi }} ‚Ä¢ Locataire
            </p>
        </div>
        <div style="display: flex; gap: 10px; flex-wrap: wrap;">
            <a href="{{ path('admin_locataire') }}" class="btn btn-secondary">‚Üê Retour √† la recherche</a>
            <a href="{{ path('admin_dashboard') }}" class="btn btn-secondary">üè† Dashboard</a>
        </div>
    </div>

    {% if error is defined and error %}
        <div style="background: #fed7d7; border: 1px solid #f56565; border-radius: 8px; padding: 20px; margin-bottom: 30px;">
            <h3 style="color: #c53030; margin-bottom: 10px;">‚ö†Ô∏è Erreur de connexion</h3>
            <p style="color: #742a2a; margin: 0;">{{ error }}</p>
        </div>
    {% endif %}

    {% if locataire %}
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 30px;">
            <!-- Informations g√©n√©rales -->
            <div style="background: white; border-radius: 12px; padding: 25px; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);">
                <h3 style="color: #2d3748; margin-bottom: 20px; font-size: 1.3rem;">üìä Informations g√©n√©rales</h3>
                
                <div style="margin-bottom: 15px; padding-bottom: 15px; border-bottom: 1px solid #e2e8f0;">
                    <strong style="color: #4a5568; display: block; margin-bottom: 5px;">ESI:</strong>
                    <span style="color: #2d3748; font-family: monospace;">{{ locataire.ESI }}</span>
                </div>
                
                <div style="margin-bottom: 15px; padding-bottom: 15px; border-bottom: 1px solid #e2e8f0;">
                    <strong style="color: #4a5568; display: block; margin-bottom: 5px;">Contrat:</strong>
                    <span style="color: #2d3748;">{{ locataire.CONTRAT }}</span>
                </div>
                
                <div style="margin-bottom: 15px; padding-bottom: 15px; border-bottom: 1px solid #e2e8f0;">
                    <strong style="color: #4a5568; display: block; margin-bottom: 5px;">Intitul√©:</strong>
                    <span style="color: #2d3748;">{{ locataire.INTITULE }}</span>
                </div>
                
                <div style="margin-bottom: 15px; padding-bottom: 15px; border-bottom: 1px solid #e2e8f0;">
                    <strong style="color: #4a5568; display: block; margin-bottom: 5px;">Nom:</strong>
                    <span style="color: #2d3748;">{{ locataire.NOM }}</span>
                </div>
                
                <div style="margin-bottom: 15px; padding-bottom: 15px; border-bottom: 1px solid #e2e8f0;">
                    <strong style="color: #4a5568; display: block; margin-bottom: 5px;">Pr√©nom:</strong>
                    <span style="color: #2d3748;">{{ locataire.PRENOM }}</span>
                </div>
            </div>

            <!-- Informations de contact -->
            <div style="background: white; border-radius: 12px; padding: 25px; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);">
                <h3 style="color: #2d3748; margin-bottom: 20px; font-size: 1.3rem;">üìû Informations de contact</h3>
                
                <div style="margin-bottom: 15px; padding-bottom: 15px; border-bottom: 1px solid #e2e8f0;">
                    <strong style="color: #4a5568; display: block; margin-bottom: 5px;">Adresse:</strong>
                    <span style="color: #2d3748;">{{ locataire.ADRESSE }}</span>
                </div>
                
                <div style="margin-bottom: 15px; padding-bottom: 15px; border-bottom: 1px solid #e2e8f0;">
                    <strong style="color: #4a5568; display: block; margin-bottom: 5px;">T√©l√©phone:</strong>
                    <span style="color: #2d3748;">{{ locataire.TELEPHONE }}</span>
                </div>
                
                <div style="margin-bottom: 15px; padding-bottom: 15px; border-bottom: 1px solid #e2e8f0;">
                    <strong style="color: #4a5568; display: block; margin-bottom: 5px;">Email:</strong>
                    <span style="color: #2d3748;">{{ locataire.EMAIL }}</span>
                </div>
            </div>
        </div>

        <!-- Informations de bail -->
        {% if locataire.DATE_ENTREE is defined or locataire.DATE_SORTIE is defined or locataire.STATUT is defined %}
            <div style="background: white; border-radius: 12px; padding: 25px; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); margin-bottom: 30px;">
                <h3 style="color: #2d3748; margin-bottom: 20px; font-size: 1.3rem;">üìã Informations de bail</h3>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 20px;">
                    {% if locataire.DATE_ENTREE is defined %}
                        <div>
                            <strong style="color: #4a5568; display: block; margin-bottom: 5px;">Date d'entr√©e:</strong>
                            <span style="color: #2d3748;">
                                {% if locataire.DATE_ENTREE %}
                                    {{ locataire.DATE_ENTREE|date('d/m/Y') }}
                                {% else %}
                                    <span style="color: #a0aec0;">Non renseign√©e</span>
                                {% endif %}
                            </span>
                        </div>
                    {% endif %}
                    
                    {% if locataire.DATE_SORTIE is defined %}
                        <div>
                            <strong style="color: #4a5568; display: block; margin-bottom: 5px;">Date de sortie:</strong>
                            <span style="color: #2d3748;">
                                {% if locataire.DATE_SORTIE %}
                                    {{ locataire.DATE_SORTIE|date('d/m/Y') }}
                                {% else %}
                                    <span style="color: #a0aec0;">Non renseign√©e</span>
                                {% endif %}
                            </span>
                        </div>
                    {% endif %}
                    
                    {% if locataire.STATUT is defined %}
                        <div>
                            <strong style="color: #4a5568; display: block; margin-bottom: 5px;">Statut:</strong>
                            <span style="color: #2d3748;">
                                {% if locataire.STATUT %}
                                    {{ locataire.STATUT }}
                                {% else %}
                                    <span style="color: #a0aec0;">Non renseign√©</span>
                                {% endif %}
                            </span>
                        </div>
                    {% endif %}
                </div>
            </div>
        {% endif %}

        <!-- Actions -->
        <div style="background: white; border-radius: 12px; padding: 25px; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);">
            <h3 style="color: #2d3748; margin-bottom: 20px; font-size: 1.3rem;">‚ö° Actions</h3>
            <div style="display: flex; gap: 15px; flex-wrap: wrap;">
                <button onclick="exportSingleRecord('csv')" class="btn btn-success">
                    üìÑ Export CSV
                </button>
                <button onclick="exportSingleRecord('json')" class="btn btn-success">
                    üìÑ Export JSON
                </button>
            </div>
        </div>
    {% endif %}
{% endblock %}

{% block javascript %}
<script>
    function exportSingleRecord(format) {
        const url = window.location.origin + '/admin/locataire/export/' + format + '?esi={{ esi }}';
        window.location.href = url;
    }
</script>
{% endblock %} 