{% extends 'admin/base.html.twig' %}

{% block title %}Déverrouiller/MàJ mot de passe - Outil DSI{% endblock %}

{% block content %}
    <div style="background: #fff; border-radius: 18px; box-shadow: 0 4px 24px rgba(35,41,70,0.07); padding: 56px 56px; max-width: 900px; margin: 0 auto;">
        <h2 style="font-size: 1.5rem; color: #232946; font-weight: bold; margin-bottom: 18px;">Déverrouiller ou modifier le mot de passe</h2>
        <form method="get" style="display: flex; gap: 16px; align-items: center; margin-bottom: 24px;">
            <input type="text" name="user_id" placeholder="ID utilisateur (ex: jdupont)" value="{{ userId|default('') }}" required style="flex:1; padding: 12px 14px; border: 1.5px solid #e2e8f0; border-radius: 7px; font-size: 1.08rem; background: #f7fafc;">
            <button type="submit" style="background: #ff6600; color: #fff; font-weight: 600; padding: 12px 22px; border-radius: 7px; border: none; font-size: 1.08rem; letter-spacing: 0.5px; cursor: pointer; transition: background 0.2s;">Rechercher</button>
        </form>
        {% if userId %}
            <form method="post" style="margin-top: 18px; display: flex; flex-direction: column; gap: 12px;">
                <input type="hidden" name="user_id" value="{{ userId }}">
                <label style="font-size: 1.08rem; color: #232946; margin-bottom: 10px; display: block;">Nouveau mot de passe :</label>
                <input type="text" name="new_password" placeholder="Nouveau mot de passe" style="padding: 12px 14px; border: 1.5px solid #e2e8f0; border-radius: 7px; font-size: 1.08rem; background: #f7fafc; width: 100%;">
                <div style="display: flex; gap: 16px;">
                    <button type="submit" name="action" value="unlock" style="background: #ff6600; color: #fff; font-weight: 600; padding: 10px 22px; border-radius: 7px; border: none; font-size: 1.08rem; letter-spacing: 0.5px; cursor: pointer; transition: background 0.2s;">Déverrouiller</button>
                    <button type="submit" name="action" value="modify" style="background: #3182ce; color: #fff; font-weight: 600; padding: 10px 22px; border-radius: 7px; border: none; font-size: 1.08rem; letter-spacing: 0.5px; cursor: pointer; transition: background 0.2s;">Modifier</button>
                </div>
            </form>
            {% if currentPassword %}
                <div style="margin-top: 18px; color: #38a169; font-weight: 600;">Mot de passe actuel : <span style="font-family: monospace;">{{ currentPassword }}</span></div>
            {% endif %}
            {% if success %}
                <div style="margin-top: 12px; color: #3182ce; font-weight: 600;">Mot de passe modifié avec succès !</div>
            {% endif %}
        {% endif %}
    </div>
{% endblock %} 